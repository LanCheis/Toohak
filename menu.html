<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Chính - Đồ án Trắc nghiệm</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="wrapper">
        <div class="container">
            <h1 id="welcome-message">Chào mừng!</h1>
            <p>Chọn một chức năng để tiếp tục.</p>
            
            <div class="menu-buttons">
                <!-- Nút này sẽ dẫn đến file index.html (quiz) của bạn -->
                <button class="btn" onclick="location.href='index.html'">
                    Bắt đầu Quiz
                </button>
                
                <!-- 
                  Mình thêm sẵn các nút này cho các bước sau.
                  Bạn có thể tạo file settings.html và add_question.html sau.
                -->
                <button class="btn btn-secondary" onclick="location.href='settings.html'">
                    Cài đặt
                </button>
                
                <button class="btn btn-secondary" onclick="location.href='add_question.html'">
                    Thêm câu hỏi (Sắp có)
                </button>

                <button class="btn btn-danger" id="logout-btn">
                    Đăng xuất
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Kiểm tra xem đã đăng nhập chưa
            const username = localStorage.getItem('currentUser');
            
            if (!username) {
                // Nếu chưa, đá về trang đăng nhập
                window.location.href = 'login.html';
            } else {
                // Nếu rồi, hiển thị lời chào
                document.getElementById('welcome-message').innerText = `Chào mừng, ${username}!`;
            }
            
            // Hiển thị avatar nếu có
            const quizSettings = JSON.parse(localStorage.getItem('quizSettings'));
            if (quizSettings && quizSettings['avatar-url']) {
                const avatarUrl = quizSettings['avatar-url'];

                // Tạo một thẻ <img>
                const avatarImg = document.createElement('img');
                avatarImg.src = avatarUrl;
                avatarImg.style.width = '60px';
                avatarImg.style.height = '60px';
                avatarImg.style.borderRadius = '50%';
                avatarImg.style.marginBottom = '10px';

                // Chèn ảnh avatar vào trước lời chào
                const welcomeMessage = document.getElementById('welcome-message');
                welcomeMessage.before(avatarImg);
            }

            // Xử lý đăng xuất
            document.getElementById('logout-btn').addEventListener('click', function() {
                // Xoá tên người dùng khỏi localStorage
                localStorage.removeItem('currentUser');
                
                // Quay về trang đăng nhập
                window.location.href = 'login.html';
            });
        });
    </script>

</body>
</html>
